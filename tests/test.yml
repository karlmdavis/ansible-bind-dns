---
- hosts: localhost
  roles:
    # Apply the role (or error out if it fails somehow). (Note: this should just be the default directory name that Git
    # will use when cloning this repository.)
    - role: ansible-tested-bind
      zones:
        - {name: 'example.com', template_source: 'db.example.com.j2'}
      forwarders:
        - 192.0.2.1
        - 203.0.113.1
      zone_transfer_peers:
        - 192.0.2.2
        - 203.0.113.2

  tasks:

    - name: Verify DNS Lookup
      command: /usr/bin/dig @localhost mail.justdavis.com A
      register: dig_result
      failed_when: "'status: NOERROR' not in dig_result.stdout or '9.10.11.12' not in dig_result.stdout"

